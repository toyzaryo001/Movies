const __vite__fileDeps=["js/vendor.@linecorp.wtp.js.BtObzboo.js","js/vendor.@babel.runtime.D4HN9azJ.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{r as st,s as nt,t as ae,f as ot,a as it,b as rt,c as ct,d as lt,e as dt,g as ut,h as pt,i as ht,j as mt,k as _t,V as ft,l as gt,m as vt,x as It,n as Ct,o as se,p as bt,q as De,u as Et,v as $e,w as Rt,y as St,z as $,A as Nt,B as yt,C as W,D as ke,E as Tt,F as wt,S as Ot,G as m,H as At,I as Lt,N as y,J as Pt,K as q,L as Mt,M as Dt,O as $t,P as kt,Q as d,R as xe,T as xt,U as ee,W as Ue,X as Ut,Y as Be,Z as Bt,_ as k,$ as ne,a0 as Ht,a1 as oe,a2 as x,a3 as ie,a4 as le,a5 as Ft,a6 as zt,a7 as de,a8 as Gt,a9 as He,aa as Kt,ab as Wt,ac as Fe,ad as ze,ae as jt,af as Vt,ag as qt,ah as _,ai as Yt,aj as Ge,ak as Ke,al as We,am as O,an as Xt,ao as je,ap as Jt,aq as te,ar as S,as as A,at as f,au as J,av as Qt,aw as ue,ax as Zt,ay as ea,az as ta,aA as aa,aB as sa,aC as r,aD as F,aE as L,aF as P,aG as pe,aH as D,aI as M,aJ as na,aK as oa,aL as ia,aM as ra,aN as ca,aO as la,aP as da,aQ as ua,aR as pa,aS as ha,aT as ma,aU as _a,aV as he,aW as Ve}from"./cms.DIE9bPH4.js";import{B as fa}from"./vendor.bowser.CeVySLxj.js";import"./vendor.@babel.runtime.D4HN9azJ.js";import{n as l,K as qe,a as ga,i as va,b as Ia,c as me,d as _e,e as fe,f as ge,g as ve,h as Ie,j as Ca}from"./vendor.@linecorp.koromo-vue.vVQGqsv5.js";import{i as ba,w as Ea}from"./vendor.portal-vue.B2uojr2y.js";import{n as Q,V as c,r as N,b as Ra,v as Ce,h as j,w as Sa,j as Ye}from"./vendor.vue.C-CinBe4.js";import"./vendor.@linecorp.textarea-ex.FX3Rk4fn.js";import"./vendor.@lit.reactive-element.D_0_JbGU.js";import"./vendor.lit-html.BXzhJpvr.js";import"./vendor.lit-element.BgUX6OJk.js";import{f as Na}from"./vendor.vue-frag.DPIDCWXQ.js";import"./vendor.@linecorp.image-size-for-browser.B5l6_Yty.js";import{c as ya,P as Ta,s as wa}from"./vendor.pinia.5yCxa5lM.js";import{m as v,a as p,b as R,c as re}from"./vendor.vuex.D82KMJQA.js";import{t as Oa}from"./tagApi.DlYf_rYs.js";import{I as E,P as Aa}from"./ProfileImageMixin.DTabSIti.js";import{M as La,D as Pa,a as Ma}from"./help.BjsHw5jH.js";import{s as Da}from"./vendor.vuex-router-sync.DqeMQgQw.js";import"./vendor.axios.BS9_udf0.js";import"./vendor.vue-router.DrFIZ7Sc.js";import"./vendor.@linecorp.emojipack.CLz0F-7L.js";import"./vendor.@linecorp.escape-html-and.BdnBw1Mz.js";import"./vendor.runes.Buv5op7v.js";import"./vendor.@linecorp.line-web-messenger-sdk.D10mPnpQ.js";import"./vendor.vue-i18n.DTagvpNG.js";import"./vendor.vue-i18n-bridge.DtxELxNF.js";import"./vendor.@intlify.shared.CyD0GI--.js";import"./vendor.@intlify.core-base.BISf4owP.js";import"./vendor.@intlify.message-compiler.BZpfwIQt.js";import"./vendor.@linecorp.biz-cms-crm-bridge.B7-nAfws.js";import"./vendor.proxy-polyfill.C1FN_8oT.js";import"./vendor.uid.CwckmPkY.js";import"./vendor.@linecorp.biz-cms-utility.BR2RnVon.js";import"./vendor.crypto-js.D_WBEyNN.js";import"./vendor.lodash-es.kV60fx6Z.js";import"./vendor.@lineoa.biz-native-picker.CdcaE_Iu.js";import"./vendor.date-fns.17Kwtgr0.js";import"./vendor.@linecorp.now.Bln5T329.js";import"./vendor.clipboard.D-JpKl5h.js";import"./vendor.fflate.DL_Fk74D.js";import"./vendor.popper.js.B72Ln0qd.js";import"./vendor.@linecorp.biz-cms-flex-renderer.f_waQWZM.js";import"./vendor.big-integer.CVGYj1np.js";import"./vendor.lodash.tf1hVoEA.js";import"./vendor.vue-active-element.CNzOBrOs.js";import"./vendor.vue-linkable.BMtvmq1S.js";import"./vendor.@vue.devtools-api.CRAb-KIx.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="159efe22-e502-4663-8a37-a1baaf334ca7",t._sentryDebugIdIdentifier="sentry-dbid-159efe22-e502-4663-8a37-a1baaf334ca7")}catch{}})();var $a={APPLICATION_PHASE:"REAL",APPLICATION_TYPE:"pc",APPLICATION_VERSION:"6.9.2",NETWORK_CONFIG:{SERVER_INFO:{LOGIN:{DOMAIN:"https://account.line.biz",URI:"/login?redirectUri={uri}",PORT:null},SSE:{DOMAIN:"https://chat-streaming-api.line.biz",URI:"/api/{version}/sse",PORT:null},CONTENT:{DOMAIN:"https://chat-content.line.biz",URI:"/bot/{botId}/{contentHash}",PORT:null},STICKER_OVERLAY_INTERNAL:{DOMAIN:"https://chat-content.line.biz",URI:"/bot/{botId}/chat/{chatId}/sticker/overlay/{messageId}",PORT:null},CMS_CDN:{DOMAIN:"https://manager.line-scdn.net",URI:"/{hash}/{tid}",PORT:null},PROFILE:{DOMAIN:"https://profile.line-scdn.net",URI:"/{hash}/{tid}",PORT:null},STICKER:{DOMAIN:"https://stickershop.line-scdn.net",URI:"/{shopId}/{apiVersion}/sticker/{stickerId}/{appType}/{type}",PORT:443},STICKER_PRODUCT:{DOMAIN:"https://stickershop.line-scdn.net",URI:"/{shopId}/{apiVersion}/product/{productId}/{appType}/{type}",PORT:443},STICKER_BASE:{DOMAIN:"https://stickershop.line-scdn.net",URI:"/{shopId}/{apiVersion}/sticker/{stickerId}/{appType}/base/{type}",PORT:443},STICKER_BASE_PLUS:{DOMAIN:"https://stickershop.line-scdn.net",URI:"/{shopId}/{apiVersion}/sticker/{stickerId}/{appType}/base/plus/{type}",PORT:443},STICKER_OVERLAY_PUBLIC:{DOMAIN:"https://stickershop.line-scdn.net",URI:"/{shopId}/{apiVersion}/sticker/{stickerId}/{appType}/overlay/name/{customStickerImageText}/{type}",PORT:443},STICON:{DOMAIN:"https://stickershop.line-scdn.net",URI:"/{shopId}/{apiVersion}/sticon/{sticonId}/{appType}/{type}",PORT:443},HELP:{DOMAIN:"https://manager.line.biz",URI:"/help?region={countryCodeWithUnderscore}",PORT:443},FAQ:{DOMAIN:"https://help2.line.me",URI:"/official_account{countryCodeWithUnderscore}/web/pc?lang={lang}",PORT:443},PROFILE_PAGE_SETTING:{DOMAIN:"https://page.line.biz",URI:"/account/{basicSearchId}",PORT:null},MONTHLY_PLAN_SETTING:{DOMAIN:"https://manager.line.biz",URI:"/account/{basicSearchId}/purchase/monthly-plan",PORT:null},COUPON_SETTING:{DOMAIN:"https://manager.line.biz",URI:"/account/{basicSearchId}/coupon",PORT:null},CMS_MAIN:{DOMAIN:"https://manager.line.biz",URI:"/account/{basicSearchId}",PORT:null},CARD_BASED_MESSAGE_SETTING:{DOMAIN:"https://manager.line.biz",URI:"/account/{basicSearchId}/cardtypemessage",PORT:null},ACCOUNT_SETTING:{DOMAIN:"https://manager.line.biz",URI:"/account/{basicSearchId}/setting",PORT:null}},URL:{EMOJIPACK:"https://emojipack.landpress.line.me/",CMS:"https://manager.line.biz/",CRM:"https://chat.line.biz/",ACCOUNT_PROFILE:"https://account.line.biz/profile",OA_CALL_GUIDE_HELP:"https://help.line.me/line/?contentId=20017541",PAYMENT_HELP:"https://help.line.me/line/android/pc?lang=ja&contentId=20000714"}},WTS_SERVICE_NAME:"line-oa-real",COMMITHASH:"1974a0bb",PUBLIC_PATH:"https://vos.line-scdn.net/line-oa-crm-pc/",SENTRY_DSN:"https://91b31f43c6ef4ba196f6b2f320b77de4@sentry-uit.line-apps.com/3",SENTRY_JS_PATH:"https://vos.line-scdn.net/sentry/js/",SENTRY_WHITELIST_URLS:"[/https?:\\/\\/[a-z0-9-]+\\.line\\.(biz|me)/i, /https?:\\/\\/[a-z0-9]+\\.line-scdn\\.net/, /https?:\\/\\/[a-z0-9-]+\\.website\\.line-apps\\.com/i, /https?:\\/\\/(www\\.)?line-website\\.com/]",LDSG_PATCH_PATH:"https://static.line-scdn.net/biz-app/18a4654b21f/manager/css/common/app/koromo-ldsg.css",PAGE_POKER_PATH:"https://poker.line.naver.jp",API_BASE_HOST:"",BROWSER_MINIMUM_VERSION:{CHROME:"102",FIREFOX:"107",EDGE:"107",SAFARI:"12.1"}};const ka=fa.getParser(window.navigator.userAgent),H=$a.BROWSER_MINIMUM_VERSION,xa=ka.satisfies({chrome:">=".concat(H.CHROME),firefox:">=".concat(H.FIREFOX),edge:">=".concat(H.EDGE),safari:">=".concat(H.SAFARI)});!xa&&location.pathname!=="/error/notSupportedBrowser"&&(location.href="/error/notSupportedBrowser");const Ua={name:"KvCollapseWrapper",extends:qe,beforeDestroy(){this.$root.$off("kvCollapseToggle",this.toggle),this.$root.$off("kvCollapseAccordion",this.handleAccordionEvt)}},Ba=null,Ha=null;var Fa=l(Ua,Ba,Ha,!1,null,null);const za=Fa.exports,Ga={name:"KvDropdownAutoPosition",extends:ga,props:{wrapperSelector:{type:String,required:!0}},watch:{isShow(t){const e=this.$el.closest(this.wrapperSelector),a=this.$el.firstElementChild,s=this.$refs.menu;t?this.$nextTick(()=>{const n=e.getBoundingClientRect(),i=s.getBoundingClientRect(),o=[];i.right>n.right?o.push("left: auto","right: 0"):i.left<n.left&&o.push("left: 0","right: auto"),i.bottom>n.bottom?o.push("top: auto","bottom: ".concat(a.offsetHeight,"px")):i.top<n.top&&o.push("top: 0","bottom: auto"),s.style.cssText=o.join(";")}):s.style.cssText="",this.$emit(t?"show":"hide")}}},Ka=null,Wa=null;var ja=l(Ga,Ka,Wa,!1,null,null);const be=ja.exports,z=new WeakMap,Ee=t=>{var U,T,w,B,X;t.preventDefault();const e=t.currentTarget;if(!e)return;const a=e.value,{binding:s,vnode:n}=(U=z.get(e))!=null?U:{},i=s==null?void 0:s.value,o=(T=t.clipboardData)==null?void 0:T.getData("text/plain"),g=(w=e.selectionStart)!=null?w:a.length,u=(B=e.selectionEnd)!=null?B:a.length,I=st("".concat(a.substring(0,g)).concat(o).concat(a.substring(u,a.length)));i?i(I):(X=n==null?void 0:n.elm)==null||X.dispatchEvent(new CustomEvent("removeNewLine",{detail:{text:I}}))},Va={bind(t,e,a){z.set(t,{binding:e,vnode:a}),t.addEventListener("paste",Ee)},update(t,e,a){z.set(t,{binding:e,vnode:a})},unbind(t){z.delete(t),t.removeEventListener("paste",Ee)}},qa={install(t){t.directive("remove-new-line",Va)}},Ya={directives:{frag:Na}};var Xa=function(){var e=this,a=e._self._c;return a("div",{directives:[{name:"frag",rawName:"v-frag"}]},[e._t("default")],2)},Ja=[],Qa=l(Ya,Xa,Ja,!1,null,null);const Za=Qa.exports,es={props:{src:{type:[String,Promise],default:""},dimension:{type:Array,default:null},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}},computed:{imageWidth(){return this.width!==null||this.dimension===null||this.height===null?this.width:Math.round(Number(this.height)*(this.dimension[0]/this.dimension[1]))},imageHeight(){return this.height!==null||this.dimension===null||this.width===null?this.height:Math.round(Number(this.width)/(this.dimension[0]/this.dimension[1]))}},data(){return{imageSrc:null}},watch:{src:{handler(t){t instanceof Promise?t.then(({default:e})=>{this.imageSrc=e}):this.imageSrc=t},immediate:!0}},render(t){const e={...this.$props,...this.$attrs,src:this.imageSrc,width:this.imageWidth,height:this.imageHeight,dimension:void 0};return t("img",{attrs:e,on:this.$listeners})}},ts={install:t=>t.component("VueImg",es)};let as={};const ss={install(t){t.directive("back-key-event",as)}},ns={inserted:(t,e)=>{if(typeof e.value>"u"){Q(()=>t.focus());return}e.value||e.value===""?Q(()=>{nt(t,e.value)}):Q(()=>t.blur())},componentUpdated:(t,e)=>{if(typeof e.value>"u"){t.focus();return}e.value||e.value===""?t.focus():t.blur()}},os={install(t){t.directive("focus",ns)}},Re=t=>{const e=t.currentTarget,{width:a,height:s}=e;e.setAttribute("width",String(a)),e.setAttribute("height",String(s))},is={bind(t){t.addEventListener("load",Re)},unbind(t){t.removeEventListener("load",Re)}},rs={install(t){t.directive("imageSizeLoad",is)}};let cs={};const ls={install(t){t.directive("long-press",cs)}},G=new WeakMap,Se=({currentTarget:t,target:e})=>{const{className:a,value:s}=G.get(t);s&&(!a||e.closest(".".concat(a)))&&ae.send("event",{eventAction:"click",...s})},ds={bind(t,e){t.addEventListener("click",Se),G.set(t,{className:e.arg,value:e.value})},update(t,e){setTimeout(()=>{G.set(t,{className:e.arg,value:e.value})},0)},unbind(t){setTimeout(()=>{G.delete(t),t.removeEventListener("click",Se)},0)}},us={install(t){t.directive("torimochi-click",ds)}},b=new WeakMap,V=new WeakMap,Xe=(t,e,a)=>{var s;t.componentInstance?t.componentInstance.$emit(e,a):(s=t.elm)==null||s.dispatchEvent(new CustomEvent(e))},ps=t=>{var e;for(const a of t){const{intersectionRatio:s}=a,n=a.target,i=(e=b.get(n))!=null?e:{},o=s>0||a.isIntersecting;i.isVisible!==o&&(b.set(n,{...i,isVisible:o}),i.vnode&&Xe(i.vnode,o?"visible":"invisible",i))}},Ne=(t,e={})=>{const a=V.get(t);a==null||a.disconnect();const s=new IntersectionObserver(ps,e);V.set(t,s),s.observe(t)},hs=t=>{const e=V.get(t);e==null||e.disconnect(),V.delete(t)},ms={bind(t,e,a){Ne(t,e.value),b.set(t,{vnode:a,isVisible:!1})},update(t,e,a){Ne(t,e.value),b.set(t,{...b.get(t),vnode:a})},unbind(t,e,a){var s;hs(t),(s=b.get(t))!=null&&s.isVisible&&Xe(a,"invisible",{}),b.delete(t)}},_s={install(t){t.directive("visible",ms)}},fs={messageTime:ot,messageDivisionDate:it,chatDate:rt,duration:ct,expireDate:lt,fullDate:dt,reservationDate:ut,paymentDate:pt,couponDate:ht,couponPreviewDate:mt,holidayDate:_t},gs={...fs};c.prototype.$filters=gs;const Je=ya();c.use(Ta);c.use(Je);var C={APPLICATION_PHASE:"REAL",APPLICATION_TYPE:"pc",APPLICATION_VERSION:"6.9.2",NETWORK_CONFIG:{SERVER_INFO:{LOGIN:{DOMAIN:"https://account.line.biz",URI:"/login?redirectUri={uri}",PORT:null},SSE:{DOMAIN:"https://chat-streaming-api.line.biz",URI:"/api/{version}/sse",PORT:null},CONTENT:{DOMAIN:"https://chat-content.line.biz",URI:"/bot/{botId}/{contentHash}",PORT:null},STICKER_OVERLAY_INTERNAL:{DOMAIN:"https://chat-content.line.biz",URI:"/bot/{botId}/chat/{chatId}/sticker/overlay/{messageId}",PORT:null},CMS_CDN:{DOMAIN:"https://manager.line-scdn.net",URI:"/{hash}/{tid}",PORT:null},PROFILE:{DOMAIN:"https://profile.line-scdn.net",URI:"/{hash}/{tid}",PORT:null},STICKER:{DOMAIN:"https://stickershop.line-scdn.net",URI:"/{shopId}/{apiVersion}/sticker/{stickerId}/{appType}/{type}",PORT:443},STICKER_PRODUCT:{DOMAIN:"https://stickershop.line-scdn.net",URI:"/{shopId}/{apiVersion}/product/{productId}/{appType}/{type}",PORT:443},STICKER_BASE:{DOMAIN:"https://stickershop.line-scdn.net",URI:"/{shopId}/{apiVersion}/sticker/{stickerId}/{appType}/base/{type}",PORT:443},STICKER_BASE_PLUS:{DOMAIN:"https://stickershop.line-scdn.net",URI:"/{shopId}/{apiVersion}/sticker/{stickerId}/{appType}/base/plus/{type}",PORT:443},STICKER_OVERLAY_PUBLIC:{DOMAIN:"https://stickershop.line-scdn.net",URI:"/{shopId}/{apiVersion}/sticker/{stickerId}/{appType}/overlay/name/{customStickerImageText}/{type}",PORT:443},STICON:{DOMAIN:"https://stickershop.line-scdn.net",URI:"/{shopId}/{apiVersion}/sticon/{sticonId}/{appType}/{type}",PORT:443},HELP:{DOMAIN:"https://manager.line.biz",URI:"/help?region={countryCodeWithUnderscore}",PORT:443},FAQ:{DOMAIN:"https://help2.line.me",URI:"/official_account{countryCodeWithUnderscore}/web/pc?lang={lang}",PORT:443},PROFILE_PAGE_SETTING:{DOMAIN:"https://page.line.biz",URI:"/account/{basicSearchId}",PORT:null},MONTHLY_PLAN_SETTING:{DOMAIN:"https://manager.line.biz",URI:"/account/{basicSearchId}/purchase/monthly-plan",PORT:null},COUPON_SETTING:{DOMAIN:"https://manager.line.biz",URI:"/account/{basicSearchId}/coupon",PORT:null},CMS_MAIN:{DOMAIN:"https://manager.line.biz",URI:"/account/{basicSearchId}",PORT:null},CARD_BASED_MESSAGE_SETTING:{DOMAIN:"https://manager.line.biz",URI:"/account/{basicSearchId}/cardtypemessage",PORT:null},ACCOUNT_SETTING:{DOMAIN:"https://manager.line.biz",URI:"/account/{basicSearchId}/setting",PORT:null}},URL:{EMOJIPACK:"https://emojipack.landpress.line.me/",CMS:"https://manager.line.biz/",CRM:"https://chat.line.biz/",ACCOUNT_PROFILE:"https://account.line.biz/profile",OA_CALL_GUIDE_HELP:"https://help.line.me/line/?contentId=20017541",PAYMENT_HELP:"https://help.line.me/line/android/pc?lang=ja&contentId=20000714"}},WTS_SERVICE_NAME:"line-oa-real",COMMITHASH:"1974a0bb",PUBLIC_PATH:"https://vos.line-scdn.net/line-oa-crm-pc/",SENTRY_DSN:"https://91b31f43c6ef4ba196f6b2f320b77de4@sentry-uit.line-apps.com/3",SENTRY_JS_PATH:"https://vos.line-scdn.net/sentry/js/",SENTRY_WHITELIST_URLS:"[/https?:\\/\\/[a-z0-9-]+\\.line\\.(biz|me)/i, /https?:\\/\\/[a-z0-9]+\\.line-scdn\\.net/, /https?:\\/\\/[a-z0-9-]+\\.website\\.line-apps\\.com/i, /https?:\\/\\/(www\\.)?line-website\\.com/]",LDSG_PATCH_PATH:"https://static.line-scdn.net/biz-app/18a4654b21f/manager/css/common/app/koromo-ldsg.css",PAGE_POKER_PATH:"https://poker.line.naver.jp",API_BASE_HOST:"",BROWSER_MINIMUM_VERSION:{CHROME:"102",FIREFOX:"107",EDGE:"107",SAFARI:"12.1"}},Le,Pe,Me;if((Le=window.Sentry)!=null&&Le.BrowserClient&&((Me=(Pe=window.Sentry)==null?void 0:Pe.Integrations)!=null&&Me.Vue)){const{Sentry:t}=window,e=new t.BrowserClient({dsn:C.SENTRY_DSN,release:"".concat(C.APPLICATION_TYPE,"-").concat(C.APPLICATION_PHASE,"@").concat(C.APPLICATION_VERSION,"-").concat(C.COMMITHASH.substring(0,8)),environment:C.APPLICATION_PHASE,integrations:[...t.defaultIntegrations,new t.Integrations.Vue({Vue:c,logErrors:!0})],whitelistUrls:C.SENTRY_WHITELIST_URLS,ignoreErrors:["ResizeObserver loop limit exceeded"]});t.getCurrentHub().bindClient(e),t.setExtra("screen_size","".concat(window.innerWidth," ").concat(window.innerHeight))}c.use(ft);c.use(ts);c.use(ba);c.use(va);c.use(Ia,{default:{position:"top-right",timeout:3e3,html:!1,dismiss:!1,progress:null,stretch:gt}});c.use(vt);c.use(It);c.use(os);c.use(ss);c.use(ls);c.use(_s);c.use(us);c.use(Ct);c.use(qa);c.use(se);c.use(rs);c.component(me.name,me);c.component(_e.name,_e);c.component(be.name,be);c.component(fe.name,fe);c.component(ge.name,ge);c.component(ve.name,ve);c.component(qe.name,za);c.component(Ie.name,Ie);c.component("Fragment",Za);bt();const Y=document.documentElement;Y.classList.toggle("is-ios",De);Y.classList.toggle("is-android",Et);Y.classList.toggle("is-osx",$e);Y.classList.toggle("is-windows",Rt);St();Ea.trackInstances=!1;const vs={name:"UserContainer",data(){return{hasUserInitFinished:!1}},computed:{...v({bots:t=>t.bot.bots.list,bizId:t=>t.env.myInfo.bizId,language:t=>t.env.myInfo.language,isContainerReady:t=>t.ui.isContainerReady,isMaintenanceMode:t=>t.env.maintenanceMode,toastInfo:t=>t.env.toastInfo}),...p(["selectedBotId"]),availableBots(){return this.bots.filter(t=>!t.disabledCrm)}},watch:{toastInfo({text:t,options:e}){this.$toast(t,e)}},async created(){var a,s,n,i;ae.init(this.$root),$.init(this.$store),Nt.store=this.$store,yt.store=this.$store,W.setStore(this.$store),W.setRouter(this.$router),ke.setStore(this.$store),Tt.setStore(this.$store),performance.mark("timing-userInitStart");try{await wt(),this.afterCryptoStorageLoaded()}catch(o){if(o&&o.response&&o.response.status===Ot.UNAUTHORIZED){m.setting("LOGIN",{queryString:{uri:encodeURIComponent(location.href)}}),location.href=m.getDomain()+m.getUri();return}}const t=At(this.language);await Lt(t),this.setLanguageLoaded();const e=this.selectedBotId||this.$router.resolve(location.pathname).route.params.botId;if(!this.isMaintenanceMode&&!e){const o=this.availableBots[0]||this.bots[0];o?this.$router.mode==="abstract"?this.routerPush("/".concat(o.botId)):this.routerReplace("/".concat(o.botId)):location.href=y.URL.CMS}(s=(a=window.Sentry)==null?void 0:a.setUser)==null||s.call(a,{id:this.bizId,botId:e}),(i=(n=window.Sentry)==null?void 0:n.setTag)==null||i.call(n,"language",t),performance.measure("timing-userInit","timing-userInitStart"),this.hasUserInitFinished=!0},methods:{...R({setLanguageLoaded:Pt}),afterCryptoStorageLoaded:q}},Is=null,Cs=null;var bs=l(vs,Is,Cs,!1,null,null);const Es=bs.exports;function Rs(t){Mt.setBotId(t),Oa.setBotId(t)}const Ss=async()=>{const t=Dt(),e=$t(),a=kt();d.commit(xe),xt(),ke.reset(),await Promise.all([ee("api-getChatMode",d.dispatch("getChatMode")),ee("api-getChatModeSchedule",d.dispatch("getChatModeSchedule"))]),d.dispatch("getChatList"),d.dispatch("getBotOwners"),e.getRecentStickers(),t.getRecentEmojis(),a.getSavedReplies(),d.dispatch("getAllPlugins"),d.dispatch("getCallSession")},Ns=t=>{const e=ee("api-fetchBot",d.dispatch("fetchBot",{botId:t})),a=Ue();return d.dispatch("getCallSettings"),a.getAllTags(),a.getAllAutoTags(),d.dispatch("getReservationSettings"),d.dispatch("getSearchLimitationStats"),d.dispatch("getGainFriendsInfo"),Promise.all([e.then(async()=>{await d.dispatch("getBotInformation"),d.getters.canUseHolidaySetting&&(await d.dispatch("getHolidayInfo"),await d.dispatch("checkSchedule"))}),d.dispatch("getAvailableFeatures")])};function ys(t){return Promise.all([Ss(),Ns(t)])}async function Ts(t){Rs(t),await d.dispatch("checkBotAvailabilityBySearchId")&&await ys(t)}const ye=t=>({JP:"jp",TW:"tw",TH:"th"})[t]||"",ws={name:"HeaderHelpLayout",props:{region:{type:String,default:""}},computed:{manualLink(){return this.region?La[this.region]||Pa:""},detailedManualLinks(){return this.region?Ma[this.region]:null},faqLink(){var s;if(!this.region)return"";const t=ye(this.region),e=t?"_":"",a=(s={jp:"ja",th:"th",tw:"zh-Hant"}[t])!=null?s:"en";return m.setting("FAQ",{queryString:{countryCodeWithUnderscore:"".concat(e).concat(t),lang:a}}),"".concat(m.getDomain()).concat(m.getUri())},helpLink(){if(!this.region)return"";const t=ye(this.region)||this.region.toLowerCase();return m.setting("HELP",{queryString:{countryCodeWithUnderscore:t}}),"".concat(m.getDomain()).concat(m.getUri())}},methods:{openLinkToBlank(t){window.open(t,"_blank")}}};var Os=function(){var e=this,a=e._self._c;return a("KvDropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("a",{directives:[{name:"torimochi-click",rawName:"v-torimochi-click",value:{eventCategory:"crm.header",eventLabel:"help"},expression:"{ eventCategory: 'crm.header', eventLabel: 'help' }"}],staticClass:"header-menu-button mx-1 text-nowrap d-flex align-items-center",attrs:{href:"#",rel:"noopener",target:"_blank","aria-expanded":"false"},on:{click:function(s){s.preventDefault()}}},[a("i",{staticClass:"las la-question-circle la-fw text-muted align-middle"}),a("span",{directives:[{name:"t",rawName:"v-t",value:"oa.navigation.button.help",expression:"'oa.navigation.button.help'"}],staticClass:"text-body"})])]},proxy:!0}])},[a("div",[e.detailedManualLinks?a("KvDropdownItem",{staticClass:"border-bottom py-3",attrs:{rel:"noopener",target:"_blank"}},[a("h5",{directives:[{name:"t",rawName:"v-t",value:"oa.navigation.subtitle.suggestmanual",expression:"'oa.navigation.subtitle.suggestmanual'"}]}),a("ul",{staticClass:"pl-3 mb-0"},[e.detailedManualLinks.CHAT?a("li",[a("a",{attrs:{href:e.detailedManualLinks.CHAT},on:{click:function(s){return s.preventDefault(),e.openLinkToBlank(e.detailedManualLinks.CHAT)}}},[e._v(" "+e._s(e.$t("oa.navigation.button.suggestedmanual",{title:e.$t("oa.headernavbar.button.chats")}))+" ")])]):e._e(),e.detailedManualLinks.CALL?a("li",[a("a",{attrs:{href:e.detailedManualLinks.CALL},on:{click:function(s){return s.preventDefault(),e.openLinkToBlank(e.detailedManualLinks.CALL)}}},[e._v(" "+e._s(e.$t("oa.navigation.button.suggestedmanual",{title:e.$t("oa.callsettings.subtitle.linecalltoggle")}))+" ")])]):e._e()])]):e._e(),a("KvDropdownItem",{staticClass:"border-bottom py-3",attrs:{id:"__test__manual_link",rel:"noopener",href:e.manualLink,target:"_blank"}},[a("h5",{directives:[{name:"t",rawName:"v-t",value:"common.manual",expression:"'common.manual'"}],attrs:{id:"__test__manual_link_title"}}),a("p",{directives:[{name:"t",rawName:"v-t",value:"oa.help.desc.manualteaser",expression:"'oa.help.desc.manualteaser'"}],staticClass:"small text-muted mb-0",attrs:{id:"__test__manual_link_desc"}})]),a("KvDropdownItem",{staticClass:"border-bottom py-3",attrs:{id:"__test__faq_link",rel:"noopener",href:e.faqLink,target:"_blank"}},[a("h5",{directives:[{name:"t",rawName:"v-t",value:"oa.help.button.faqcontact",expression:"'oa.help.button.faqcontact'"}],attrs:{id:"__test__faq_link_title"}}),a("p",{directives:[{name:"t",rawName:"v-t",value:"oa.help.desc.faqcontactteaser",expression:"'oa.help.desc.faqcontactteaser'"}],staticClass:"small text-muted mb-0",attrs:{id:"__test__faq_link_desc"}})]),a("div",{staticClass:"text-right px-4 py-2"},[a("a",{directives:[{name:"t",rawName:"v-t",value:"oa.help.link.helpcenter",expression:"'oa.help.link.helpcenter'"}],attrs:{id:"__test__setting_link_title",href:e.helpLink},on:{click:function(s){return s.preventDefault(),e.openLinkToBlank(e.helpLink)}}})])],1)])},As=[],Ls=l(ws,Os,As,!1,null,null);const Ps=Ls.exports,Ms={render:()=>null};function Ds(){const t=N(!1),e=N(!1);function a(){e.value=!0}function s(){e.value=!1}function n(){t.value=!0}return Ra({isError:Ce(t),isLoading:Ce(e),onLoading:a,onLoad:s,onError:n})}function $s(t){const e=N(""),a=N(""),s=N(t.imageSize||E.ORIGIN),n=N(t.imageSize2x||E.ORIGIN),i=j(()=>"".concat(e.value).concat(a.value)),o=j(()=>{var u;return((u=t.profileOriginUrl)==null?void 0:u.value)||""});return Sa(o,u=>{e.value=u&&s.value?"".concat(u).concat(s.value):u,u&&n.value&&(a.value="".concat(u).concat(n.value," 2x"))},{immediate:!0}),{profileUrl:e,profileSrcSet:a,imageSize:s,imageSize2x:n,profileImageKey:i,profileOriginUrl:o,onError:()=>{e.value=o.value,a.value=""}}}const ks=Ye({name:"BotIcon"}),xs=Ye({...ks,props:{botModel:{default:void 0},size:{default:""},width:{default:""},height:{default:""},alt:{default:""},iconImageSize:{default:E.ORIGIN},iconImageSize2x:{default:E.ORIGIN},useSrcSet:{type:Boolean,default:!0}},setup(t){const e=t,{isError:a,isLoading:s,onLoading:n,onLoad:i,onError:o}=Ds(),g=j(()=>{var ce;return((ce=e.botModel)==null?void 0:ce.iconUrl)||""}),{profileUrl:u,profileSrcSet:I,profileImageKey:U,profileOriginUrl:T,onError:w}=$s({imageSize:e.iconImageSize,imageSize2x:e.iconImageSize2x,profileOriginUrl:g}),B=j(()=>e.size&&"avatars-".concat(e.size));return{__sfc:!0,props:e,isError:a,isLoading:s,onLoading:n,onLoad:i,onImageLoadError:o,botModelIcon:g,profileUrl:u,profileSrcSet:I,profileImageKey:U,profileOriginUrl:T,onProfileImageError:w,sizeClass:B,imageLoadError:()=>{u.value===T.value&&o(),w()},defaultSingleProfile:Ut}}});var Us=function(){var e=this,a=e._self._c,s=e._self._setupProxy;return a("div",{staticClass:"avatars rounded-circle overflow-hidden",class:s.sizeClass},[s.isError||s.isLoading||!s.profileUrl?a("img",{staticClass:"avatars-one rounded-circle object-fit-cover w-100 h-100",attrs:{src:s.defaultSingleProfile,alt:e.alt,height:e.height,width:e.width}}):e._e(),!s.isError&&s.profileUrl?a("VueSlotLazyLoader",{directives:[{name:"show",rawName:"v-show",value:!s.isError,expression:"!isError"}],key:s.profileImageKey,attrs:{src:s.profileUrl,srcset:e.useSrcSet?s.profileSrcSet:"","load-class":"avatars-one rounded-circle object-fit-cover w-100 h-100",tag:"img",height:e.height,width:e.width,alt:e.alt},on:{loading:s.onLoading,error:s.imageLoadError,load:s.onLoad}}):e._e()],1)},Bs=[],Hs=l(xs,Us,Bs,!1,null,null);const Qe=Hs.exports,Fs={name:"HeaderBotItem",components:{BotIcon:Qe},props:{botModel:{type:Object,required:!0}},computed:{userPermissionNameKey(){return Be[this.botModel.userPermissionType]},unreadCount(){if(this.botModel.unreadCount)return Bt(this.botModel.unreadCount,k.MAX_UNREAD_CHAT_BADGE_COUNT)}},created(){this.ImageSize=E},methods:{onSelect(){this.routerReplace("/".concat(this.botModel.botId,"/"))}}};var zs=function(){var e=this,a=e._self._c;return a("KvDropdownItem",{staticClass:"dropdown-item d-flex align-items-center cursor-pointer",on:{change:e.onSelect}},[a("div",{staticClass:"mr-2"},[a("BotIcon",{attrs:{"bot-model":e.botModel,"use-src-set":"",size:"xs",width:"36",height:"36","icon-image-size":e.ImageSize.PREVIEW_WAP,"icon-image-size-2x":e.ImageSize.PREVIEW}})],1),a("div",[a("div",[e._v(" "+e._s(e.botModel.name)+" ")]),a("div",{directives:[{name:"t",rawName:"v-t",value:e.userPermissionNameKey,expression:"userPermissionNameKey"}],staticClass:"small text-muted"})]),e.unreadCount?a("div",{staticClass:"ml-auto"},[a("div",{staticClass:"badge badge-pill badge-primary ml-3"},[e._v(" "+e._s(e.unreadCount)+" ")])]):e._e()])},Gs=[],Ks=l(Fs,zs,Gs,!1,null,null);const Ws=Ks.exports,js={name:"HeaderSelectedBotItem",components:{BotIcon:Qe},props:{botModel:{type:ne,required:!0}},created(){this.ImageSize=E}};var Vs=function(){var e=this,a=e._self._c;return a("a",{staticClass:"text-body pr-2",attrs:{href:"#"},on:{click:function(s){s.preventDefault()}}},[a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"mr-1"},[a("BotIcon",{attrs:{"bot-model":e.botModel,size:"xxs",width:"24",height:"24","icon-image-size":e.ImageSize.PREVIEW_WAP}})],1),a("div",{staticClass:"dropdown-toggle lead"},[a("div",{staticClass:"account-name d-inline-block text-truncate align-middle"},[e._v(" "+e._s(e.botModel.name)+" ")])])])])},qs=[],Ys=l(js,Vs,qs,!1,null,null);const Xs=Ys.exports,Js={name:"HeaderBotLayout",components:{HeaderSelectedBotItem:Xs,HeaderBotItem:Ws},computed:{...p(["selectedBot"]),...v({isLoading:t=>t.bot.bots.isLoading,botModelList:t=>t.bot.bots.list})},mounted(){this.unwatch=this.$watch(()=>this.$refs.dropdown.isShow,this.onChangeLayerShown)},beforeDestroy(){var t;(t=this.unwatch)==null||t.call(this)},methods:{...re(["getBotList"]),onChangeLayerShown(t){if(t&&this.$refs.list){const e=this.$refs.list.querySelector(".active");e&&Ht(e)}}}};var Qs=function(){var e=this,a=e._self._c;return a("div",{staticClass:"d-flex align-items-center px-3",attrs:{id:"header-user"}},[a("KvDropdown",{ref:"dropdown",scopedSlots:e._u([{key:"button-content",fn:function(){return[e.selectedBot?a("HeaderSelectedBotItem",{directives:[{name:"torimochi-click",rawName:"v-torimochi-click",value:{eventCategory:"crm.header",eventLabel:"account_list"},expression:"{ eventCategory: 'crm.header', eventLabel: 'account_list' }"}],attrs:{"bot-model":e.selectedBot},nativeOn:{click:function(s){return e.getBotList()}}}):e._e()]},proxy:!0}])},[a("div",{ref:"list",staticClass:"w-min-200 h-max-240 overflow-y-auto"},[a("KvDropdownHeader",[e._v(" "+e._s(e.$t("oa.headeraccountmenu.desc.accounts"))+" "),e.isLoading?a("i",{staticClass:"fal fa-circle-notch fa-spin text-muted ml-2"}):e._e()]),e._l(e.botModelList,function(s){return a("HeaderBotItem",{key:s.botId,class:{active:s===e.selectedBot},attrs:{"bot-model":s}})})],2)])],1)},Zs=[],en=l(Js,Qs,Zs,!1,null,null);const tn=en.exports,an="https://vos.line-scdn.net/line-oa-crm-pc/assets/loam-type-light.DNnyxw0G.svg",sn={name:"HeaderLogo",computed:{...p(["selectedBot"]),cmsUrl(){return m.setting("CMS_MAIN",{queryString:{basicSearchId:this.selectedBot&&this.selectedBot.basicSearchId}}),"".concat(m.getDomain()).concat(m.getUri())},logoSrc(){return an}}};var nn=function(){var e=this,a=e._self._c;return a("div",{staticClass:"d-flex align-items-center justify-content-center flex-shrink-0 flex-grow-0",attrs:{id:"header-logo"}},[a("a",{attrs:{rel:"noopener",href:e.cmsUrl,target:"_blank"}},[a("img",{attrs:{src:e.logoSrc,alt:"LINE Official Account Manager",height:"23",width:"150"}})])])},on=[],rn=l(sn,nn,on,!1,null,null);const Ze=rn.exports,cn={name:"HeaderLayout",components:{HeaderLogo:Ze,HeaderBotLayout:tn,HeaderHelpLayout:Ps,Debugger:Ms},mixins:[Aa],data(){return{CMS_URL:y.URL.CMS,ACCOUNT_PROFILE_URL:"".concat(y.URL.ACCOUNT_PROFILE,"?").concat(new URLSearchParams({redirectUri:y.URL.CRM})),imageSize:E.PREVIEW_WAP}},computed:{...p(["selectedBot"]),userPermissionNameXLTKey(){var t;return Be[(t=this.selectedBot)==null?void 0:t.userPermissionType]},...v({myInfo:t=>t.env.myInfo}),botRegion(){var t;return(t=this.selectedBot)==null?void 0:t.region},profileOriginUrl(){return this.myInfo.linePictureUri}},methods:{onClickLogout(){oe.getLogoutUri(location.pathname).then(({logoutUri:t})=>location.href=t).catch(x)}}};var ln=function(){var e=this,a=e._self._c;return a("header",{attrs:{id:"header"}},[a("div",{attrs:{id:"header-upper"}},[a("HeaderLogo"),a("HeaderBotLayout")],1),a("div",{attrs:{id:"header-lower"}},[a("Debugger"),a("div",{staticClass:"d-flex align-items-center px-3",attrs:{id:"header-menu"}},[a("KvDropdown",{staticClass:"w-min-0",attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("a",{directives:[{name:"torimochi-click",rawName:"v-torimochi-click",value:{eventCategory:"crm.header",eventLabel:"user_settings"},expression:"{ eventCategory: 'crm.header', eventLabel: 'user_settings' }"}],staticClass:"header-menu-button mx-1 w-min-0 d-flex align-items-center",attrs:{href:"#"},on:{click:function(s){s.preventDefault()}}},[e.profileUrl?a("div",{staticClass:"flex-shrink-0 mx-1"},[a("div",{staticClass:"avatars rounded-circle overflow-hidden avatars-xxs"},[a("img",{staticClass:"avatars-one rounded-circle object-fit-cover w-100 h-100",attrs:{alt:e.$t("access.oa.navigation.icon.optionmenu"),src:e.profileUrl,height:"24",width:"24"},on:{error:e.onError}})])]):a("i",{staticClass:"las la-user-circle text-muted align-middle mx-1 flex-shrink-0"}),a("span",{staticClass:"user-name d-inline-block text-truncate text-body"},[e._v(e._s(e.myInfo.name))])])]},proxy:!0}])},[a("KvDropdownHeader",{directives:[{name:"t",rawName:"v-t",value:e.userPermissionNameXLTKey,expression:"userPermissionNameXLTKey"}]}),a("KvDropdownItem",{directives:[{name:"t",rawName:"v-t",value:"oa.headerusermenu.button.accounts",expression:"'oa.headerusermenu.button.accounts'"}],attrs:{href:e.CMS_URL,rel:"noopener",target:"_blank"}}),a("KvDropdownItem",{directives:[{name:"t",rawName:"v-t",value:"oa.headerusermenu.button.settings",expression:"'oa.headerusermenu.button.settings'"}],attrs:{href:e.ACCOUNT_PROFILE_URL,rel:"noopener",target:"_blank"}}),a("KvDropdownDivider"),a("KvDropdownItem",{directives:[{name:"t",rawName:"v-t",value:"oa.headerusermenu.button.logout",expression:"'oa.headerusermenu.button.logout'"}],staticClass:"cursor-pointer",nativeOn:{click:function(s){return e.onClickLogout.apply(null,arguments)}}})],1),a("div",{attrs:{id:"header-menu-help"}},[a("HeaderHelpLayout",{attrs:{region:e.botRegion}})],1)],1)],1)])},dn=[],un=l(cn,ln,dn,!1,null,null);const pn=un.exports,hn=0,mn={name:"BotContainer",components:{HeaderLayout:pn},mixins:[ie],data(){return{hasBotInitFinished:!1,showShortcutModal:!1,keyEvents:{[le.SHIFT|le.SLASH]:this.onShowModal}}},computed:{...p(["isLanguageLoaded"]),...v({isConnected:t=>t.env.network.isConnected,shouldNetworkToastHide:t=>t.env.network.hideToast,alertModal:t=>t.env.alertModal,isAppLoading:t=>t.ui.isAppLoading,networkErrorCount:t=>t.env.networkErrorCount,botErrorCode:t=>t.bot.errorCode}),hasAppInitFinished(){return this.hasUserInitFinished&&this.hasBotInitFinished}},watch:{alertModal(t){t&&this.alertWithBackKey(t,t.callback)},isConnected(t){t&&this.toaster?this.toaster.hide():!t&&!this.shouldNetworkToastHide&&this.showNetworkErrorToast()},isAppLoading:{handler(t){const e=document.getElementById("appLoading");e&&(t?e.style.display="":e.style.display="none")},immediate:!0},networkErrorCount(){this.showNetworkErrorToast()},hasAppInitFinished(t){t&&this.updateAppLoading(!1)}},beforeCreate(){var a,s;const t=this.$store.getters.selectedBotId,e={botId:t};this.$store.state.env.myInfo.bizId&&(e.id=this.$store.state.env.myInfo.bizId),(s=(a=window.Sentry)==null?void 0:a.setUser)==null||s.call(a,e),performance.mark("timing-botInitStart"),Ts(t).then(()=>{var i,o;const n=this.$store.getters.selectedBot;(o=(i=window.Sentry)==null?void 0:i.setTag)==null||o.call(i,"bot.region",n.region)},n=>{var i,o;n&&n.handledInCommon||(o=(i=window.Sentry)==null?void 0:i.captureException)==null||o.call(i,n)}).finally(()=>{performance.measure("timing-botInit","timing-botInitStart"),Ft("appLoaded"),this.hasBotInitFinished=!0})},mounted(){zt(()=>oe.getCsrfToken()).then(t=>{de.setCsrfToken(t.headerName,t.token),W.connect(this.$store.getters.selectedBotId)}).catch(x)},beforeDestroy(){this.updateAppLoading(!0),W.terminate(),Gt.abortAll(),de.abortAll()},methods:{...R({updateAppLoading:He}),showNetworkErrorToast(){this.toaster&&this.toaster.hide(),this.toaster=this.$toast(this.$t("oa.chat.toast.networkunstablebanner"),{hasProgress:!1,timeout:hn,variant:"danger",stretch:!0})},onShowModal(){$.hasFocus&&(this.botErrorCode||(this.showShortcutModal=!0,ae.send("event",{eventCategory:"crm",eventAction:"shortcut",eventLabel:"shortcut_help"})))},onCloseModal(){this.showShortcutModal=!1}}},_n=null,fn=null;var gn=l(mn,_n,fn,!1,null,null);const vn=gn.exports,In={name:"RouteConfirmDialog",mixins:[ie],data(){return{isDialogOpen:!1,targetPath:void 0,targetKey:void 0}},computed:{...v({needConfirm:t=>t.settings.needConfirm})},watch:{$route:{immediate:!0,handler(){this.isDialogOpen=!1,this.targetPath=void 0,this.targetKey=void 0,this.unsetConfirmForRouting()}}},mounted(){window.addEventListener("popstate",this.onUpdateTarget),window.addEventListener("beforeunload",this.onBeforeUnload),this.$router.beforeEach((t,e,a)=>{if(t.query.force){a();return}if(this.needConfirm&&!this.isDialogOpen){const s=()=>{a()},n=()=>{this.isDialogOpen=!1,a(!1)};this.isDialogOpen=!0,this.showConfirmDialog(s,n)}else this.isDialogOpen&&this.targetPath&&t.path!==this.targetPath?a({path:this.targetPath}):a()})},beforeDestroy(){window.removeEventListener("popstate",this.onUpdateTarget),window.removeEventListener("beforeunload",this.onBeforeUnload)},methods:{...R({unsetConfirmForRouting:Kt}),showConfirmDialog(t,e){this.confirmWithBackKey({message:this.$t("common.error.unsavedchanges"),primary:this.$t("common.discard"),secondary:this.$t("common.cancel"),reverse:!0,warn:Wt},t,e),this.$nextTick(()=>{document.querySelector(".dialogs .modal .btn")})},onUpdateTarget(t){var e;(!this.targetKey||t.state&&this.targetKey>t.state.key)&&(this.targetKey=(e=t.state)==null?void 0:e.key,this.targetPath=document.location.pathname)},onBeforeUnload(t){this.needConfirm&&(t.preventDefault(),t.returnValue="")}},render:()=>null},Cn={name:"CallReceivedModalPC",props:{micPermission:{type:String,default:null}},computed:{...p(["selectedBotId","selectedBot","getChatDisplayName"]),...v({profiles:t=>t.chat.profiles,callInfo:t=>t.call.callInfo,language:t=>t.env.myInfo.language}),callIncomingText(){return this.$t("oa.inappalert.desc.pccallincoming",{"Bot name":this.selectedBot.name,"Display name":this.getChatDisplayName(this.callInfo.callerId)})}},methods:{...R({rejectCall:Fe,answerCall:ze}),onClickAnswer(){const t=this.profiles[this.callInfo.callerId]||new jt,e=new URLSearchParams({gatewayUri:this.callInfo.gatewayUri,callerId:this.callInfo.callerId,callerDisplayName:t.displayName,callerIconHash:t.iconHash||"",responderId:this.selectedBotId,responderDisplayName:this.selectedBot.name,responderIconHash:this.selectedBot.iconHash,callType:this.callInfo.callType,inviteHeaders:JSON.stringify(this.callInfo.inviteHeaders),language:this.language,region:this.selectedBot.region,micPermission:this.micPermission});window.open("".concat(Vt[qt.CALL_POPUP],"?").concat(e.toString()),"_blank","width=1280,height=800,menubar=0,toolbar=0,location=0,status=0"),this.answerCall()},onClickReject(){this.rejectCall()}}};var bn=function(){var e=this,a=e._self._c;return a("div",{staticClass:"calert",attrs:{role:"alert"}},[a("div",{staticClass:"calert-content"},[a("div",{staticClass:"calert-body"},[e._m(0),a("div",{staticClass:"w-min-0"},[a("strong",{directives:[{name:"t",rawName:"v-t",value:"oa.inappalert.title.pccallincoming",expression:"'oa.inappalert.title.pccallincoming'"}],staticClass:"d-block"}),a("span",{directives:[{name:"emoji-text",rawName:"v-emoji-text",value:e.callIncomingText,expression:"callIncomingText"}],staticClass:"d-block",attrs:{"data-emoji-width":"15","data-emoji-height":"15"}})])])]),a("div",{staticClass:"calert-footer"},[a("button",{directives:[{name:"t",rawName:"v-t",value:"oa.inappalert.button.declinepccall",expression:"'oa.inappalert.button.declinepccall'"}],staticClass:"calert-btn text-dark",attrs:{type:"button"},on:{click:e.onClickReject}}),a("button",{directives:[{name:"t",rawName:"v-t",value:"oa.inappalert.button.answerpccall",expression:"'oa.inappalert.button.answerpccall'"}],staticClass:"calert-btn text-dark",attrs:{type:"button"},on:{click:e.onClickAnswer}})])])},En=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"calert-icon"},[e("span",{staticClass:"la-custom-circle la-3x"},[e("i",{staticClass:"las la-circle text-primary"}),e("i",{staticClass:"la-custom-circle-icon las la-phone text-white"})])])}],Rn=l(Cn,bn,En,!1,null,null);const Sn=Rn.exports,Nn=()=>navigator.permissions?navigator.permissions.query({name:"microphone"}).then(t=>t.state,()=>O.DENIED):navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>(t.getTracks().forEach(e=>e.stop()),O.GRANTED),t=>t.message==="Permission dismissed"?O.PROMPT:O.DENIED),yn={name:"WtpManagerPC",data(){return{wtp:void 0,audio:void 0}},computed:{...p(["selectedBotId","selectedBot","getChatDisplayName"]),...v({callState:t=>t.call.callState,callInfo:t=>t.call.callInfo})},watch:{callState(t,e){t!==e&&(e===_.READY&&t===_.INCOMING?this.verifyCall():e===_.RINGING&&t===_.REJECTING&&this.rejectCall())}},created(){this.audio=document.createElement("audio"),this.audio.src=Yt,this.audio.loop=!0},beforeDestroy(){this.cleanup()},methods:{...R({setCallRinging:Ge,setCallEnded:Ke,setCallCode:We}),async verifyCall(){const t=await Nn();if(t===O.DENIED){this.$toast(this.$t("oa.call.desc.microphonepermission"),{variant:"danger"}),this.setCallEnded();return}this.$emit("updatePermission",t);const{Wtp:e}=await Xt(()=>import("./vendor.@linecorp.wtp.js.BtObzboo.js").then(n=>n.w),__vite__mapDeps([0,1])),a=this.wtp=new e,s={wtpGwUri:this.callInfo.gatewayUri};s.logLevel=0,a.wtpInit(s),a.on("ringing",()=>{this.setCallRinging(),$.hasFocus||je.notify({tag:"CRM_CALL_NOTIFICATION",title:this.$t("oa.inappalert.title.pccallincoming"),body:this.$t("oa.inappalert.desc.pccallincoming2",{Botname:this.selectedBot.name,Displayname:this.getChatDisplayName(this.callInfo.callerId)}),icon:Jt,sound:this.audio,settings:{notifyWithPreview:!0},requireInteraction:!0})}),a.on("ended",n=>{this.audio.pause(),this.audio.currentTime=0,n.ampTermCode.strCode&&this.setCallCode(n.ampTermCode.strCode),this.setCallEnded(),this.cleanup()}),a.wtpCallVerify({peerId:this.callInfo.callerId,myId:this.selectedBotId,callType:this.callInfo.callType,inviteHeaders:this.callInfo.inviteHeaders})},rejectCall(){te.rejectCallSession(this.selectedBotId,this.callInfo.callerId).catch(x),this.wtp.wtpCallEnd()},cleanup(){this.wtp&&this.wtp.wtpRelease(),this.wtp=void 0}},render(){return null}},Tn=null,wn=null;var On=l(yn,Tn,wn,!1,null,null);const An=On.exports,Ln={[S.NAME_TOO_LONG]:["oa.chat.popupdesc.filenametoolong"],[S.NOT_SUPPORTED]:["oa.chat.popupdesc.filetypenotsupported"],[S.NOT_FOUND_FILE_EXTENSION]:["oa.chat.popupdesc.filetypenotsupported"],[S.CONVERT_FILE_NOT_FOUND]:["common.fileerror"],[S.SIZE_TOO_LARGE]:["oa.chat.popupdesc.filetotalsizesendlimitatonceerror",{fileSizePerSend:k.MAX_FILE_SIZE_TEXT}],[S.BULK_SEND_ERROR]:["oa.chat.popupdesc.filebulksendlimiterror",{fileSizePerSend:k.MAX_FILE_SIZE_TEXT}]},Te={[A.SERVER_ERROR]:["oa.chat.popupdesc.temporaryerror"],[A.LOGGED_OUT]:["oa.chat.popupdesc.sessiontimeout"],[A.TOO_MANY_REQUESTS]:["oa.chat.popupdesc.temporaryerror"],[A.BAD_REQUEST]:["oa.chat.popupdesc.invalidrequest"],[f.UNAVAILABLE_STICKER]:["oa.chat.desc.stickercannotuse"],[f.SPAM_DETECTED]:["oa.chat.popupdesc.spamdetected"],[J.COUPON_EXPIRED]:["oa.chat.popupdesc.couponexpired"],[J.REFERRAL_COUPON_EXPIRED]:["oa.chat.popupdesc.couponexpired"],[J.COUPON_NOT_FOUND]:["oa.chat.popupdesc.coupondeleted"],[f.TOO_OLD_TIMESTAMP]:["oa.chat.popupdesc.unsendtimeouterror"],[f.CONFLICT_MESSAGE_ID]:["oa.chat.popupdesc.unsentbyotherusererror"],[f.DUPLICATED_MESSAGE_PIN]:["oa.chat.popupdesc.pinned"],[f.ALREADY_UNPINNED]:["oa.chat.popupdesc.unpinned"],[f.EMPTY_CHAT]:["oa.chat.popupdesc.unsendunavailable"],[f.NOT_ON_CHAT_MODE_SCHEDULE]:["oa.chat.popupdesc.smartchatbanner"],[f.NOT_IN_MANUAL_CHAT]:["oa.chat.popupdesc.smartchatbanner"],[f.TOO_MANY_MESSAGES_FOR_IDLE_CHATROOM]:["oa.chat.popupdesc.messagelimiterror"],[Qt.INCLUDING_NG_WORD]:["oa.setstatusbar.validation.invalidtext"],[ue.EXCEEDED_MAX_COUNT]:["oa.chatsettings.desc.accountreplymaxwarning"],[ue.SAVED_REPLY_NOT_FOUND]:["oa.chat.popupdesc.replydeleted"],[Zt.CARD_BASED_MESSAGE_NOT_FOUND]:["oa.chat.popupdesc.messagedeleted"],[ea.TOO_MANY_SSE_CONNECTIONS]:["oa.chat.popupdesc.toomanychats"],[ta.AUDIENCE_CREATE_LIMIT]:["oa.crm.error.audiencecreatelimit"],[aa.INVALID_CHARACTER]:["common.error.notallowedcharacter"],[sa.NO_CHAT_ROOM]:["oa.chatlist.popupdesc.notcontacteduser"],...Ln},Pn={name:"ErrorModal",mixins:[ie],props:{code:{type:String,default:void 0}},computed:{...p(["selectedBotId"]),errorText(){return Te[this.code]&&this.$t(...Te[this.code])}},methods:{onClick:q}};var Mn=function(){var e=this,a=e._self._c;return e.errorText?a("div",[a("div",{staticClass:"modal-backdrop show d-block",staticStyle:{"z-index":"1060"}}),a("div",{staticClass:"modal show d-block",staticStyle:{"z-index":"1070"}},[a("KvModal",{staticClass:"modal-dialog-centered",attrs:{header:!1,left:e.$t("common.ok"),size:"sm",stretch:""},on:{primary:e.onClick,close:e.onClick}},[a("span",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.errorText)+" ")])])],1)]):e._e()},Dn=[],$n=l(Pn,Mn,Dn,!1,null,null);const kn=$n.exports,xn={name:"ErrorModalPC",extends:kn,methods:{onClick(){this.code===A.LOGGED_OUT?location.href=y.URL.CMS:this.$emit("dismiss")}}},Un=null,Bn=null;var Hn=l(xn,Un,Bn,!1,null,null);const Fn=Hn.exports,zn={name:"KeyboardShortcutModal",computed:{...p(["hasAssigneePermission"]),optionKeyName(){return De||$e?r.OPTION:r.ALT}},methods:{getCommonChatRoomShortcut(){return{"oa.chatshortcutguide.label.closemedia":r.ESC,"oa.chatshortcutguide.label.showplusmenu":"".concat(this.optionKeyName," + ").concat(r.P),"oa.chatshortcutguide.label.selectsticker":"".concat(this.optionKeyName," + ").concat(r.S)}},getCommonChatListShortcut(){return{"oa.chatshortcutguide.label.changetoall":"".concat(r.SHIFT," + ").concat(r.A),"oa.chatshortcutguide.label.changetoinbox":"".concat(r.SHIFT," + ").concat(r.I),"oa.chatshortcutguide.label.changetounread":"".concat(r.SHIFT," + ").concat(r.U),"oa.chatshortcutguide.label.changetofollowup":"".concat(r.SHIFT," + ").concat(r.F),"oa.chatshortcutguide.label.changetoresolved":"".concat(r.SHIFT," + ").concat(r.R),"oa.chatshortcutguide.label.changetospam":"".concat(r.SHIFT," + ").concat(r.S),...this.hasAssigneePermission&&{"oa.chatshortcutguide.label.changetoassigned":"".concat(r.SHIFT," + ").concat(r.C)}}},getCommonNavigationShortcut(){return{"oa.chatshortcutguide.label.showshortcutguide":"? (".concat(r.SHIFT," + ").concat(r.SLASH,")")}}}},Gn=null,Kn=null;var Wn=l(zn,Gn,Kn,!1,null,null);const jn=Wn.exports,Vn={name:"KeyboardShortcutModalPC",extends:jn,computed:{...p(["canUseMultipleMessage"]),chatRoomShortcut(){return{...this.getCommonChatRoomShortcut(),...this.getPCChatRoomShortcut()}},chatListShortcut(){return{...this.getCommonChatListShortcut(),...this.getPCChatListShortcut()}},navigationShortcut(){return{...this.getPCNavigationShortcut(),...this.getCommonNavigationShortcut()}}},methods:{onClose(){this.$emit("close")},getPCChatRoomShortcut(){return{"oa.chatshortcutguide.label.selectfile":"".concat(this.optionKeyName," + ").concat(r.U),"oa.chatshortcutguide.label.searchmessages":r.SLASH}},getPCChatListShortcut(){return{"oa.chatshortcutguide.label.chatlistsearch":r.G}},getPCNavigationShortcut(){const t={"oa.chatshortcutguide.label.gotochat":"".concat(this.optionKeyName," + ").concat(r.SHIFT," + ").concat(r.C),"oa.chatshortcutguide.label.gotocontacts":"".concat(this.optionKeyName," + ").concat(r.SHIFT," + ").concat(r.L)};return this.canUseMultipleMessage&&(t["oa.chatshortcutguide.label.gototargetbroadcast"]="".concat(this.optionKeyName," + ").concat(r.SHIFT," + ").concat(r.M)),t["oa.chatshortcutguide.label.gotochatsettings"]="".concat(this.optionKeyName," + ").concat(r.SHIFT," + ").concat(r.S),t}}};var qn=function(){var e=this,a=e._self._c;return a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{directives:[{name:"t",rawName:"v-t",value:"oa.chatshortcutguide.title",expression:"'oa.chatshortcutguide.title'"}],staticClass:"modal-title"}),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.onClose}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"h-fix-560 py-2 overflow-auto"},[a("h4",{directives:[{name:"t",rawName:"v-t",value:"oa.chatshortcutguide.header.chatscreen",expression:"'oa.chatshortcutguide.header.chatscreen'"}],staticClass:"border-bottom pb-2 mb-0"}),a("dl",{staticClass:"d-flex flex-wrap mb-4 text-break"},e._l(Object.keys(e.chatRoomShortcut),function(s,n){return a("Fragment",{key:n},[a("dt",{directives:[{name:"t",rawName:"v-t",value:s,expression:"xlt"}],staticClass:"w-50 border-bottom py-2 pl-3 font-weight-normal"}),a("dd",{staticClass:"w-50 border-bottom py-2 pl-3 mb-0"},[e._v(" "+e._s(e.chatRoomShortcut[s])+" ")])])}),1),a("h4",{directives:[{name:"t",rawName:"v-t",value:"oa.chatshortcutguide.header.chatlist",expression:"'oa.chatshortcutguide.header.chatlist'"}],staticClass:"border-bottom pb-2 mb-0"}),a("dl",{staticClass:"d-flex flex-wrap mb-4 text-break"},e._l(Object.keys(e.chatListShortcut),function(s,n){return a("Fragment",{key:n},[a("dt",{directives:[{name:"t",rawName:"v-t",value:s,expression:"xlt"}],staticClass:"w-50 border-bottom py-2 pl-3 font-weight-normal"}),a("dd",{staticClass:"w-50 border-bottom py-2 pl-3 mb-0"},[e._v(" "+e._s(e.chatListShortcut[s])+" ")])])}),1),a("h4",{directives:[{name:"t",rawName:"v-t",value:"oa.chatshortcutguide.header.navigation",expression:"'oa.chatshortcutguide.header.navigation'"}],staticClass:"border-bottom pb-2 mb-0"}),a("dl",{staticClass:"d-flex flex-wrap mb-4 text-break"},e._l(Object.keys(e.navigationShortcut),function(s,n){return a("Fragment",{key:n},[a("dt",{directives:[{name:"t",rawName:"v-t",value:s,expression:"xlt"}],staticClass:"w-50 border-bottom py-2 pl-3 font-weight-normal"}),a("dd",{staticClass:"w-50 border-bottom py-2 pl-3 mb-0"},[e._v(" "+e._s(e.navigationShortcut[s])+" ")])])}),1)])]),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"t",rawName:"v-t",value:"common.close",expression:"'common.close'"}],staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.onClose}})])])])},Yn=[],Xn=l(Vn,qn,Yn,!1,null,null);const Jn=Xn.exports,Qn={name:"NotificationBanner",data(){return{isShown:!1,isRequiredConfirm:!1}},computed:{...p(["notificationPermission"]),xltKey(){return this.notificationPermission===F.DEFAULT?this.isRequiredConfirm?"oa.alert.desc.notifpermission1":"oa.alert.desc.enablenotif":"oa.alert.desc.notifpermission3"}},watch:{notificationPermission:{immediate:!0,async handler(t){const e=await L.getItem(P.HIDE_NOTIFICATION_BANNER);this.isShown=!e&&t&&t!==F.GRANTED}}},async mounted(){await L.getItem(P.CONFIRMED_NOTIFICATION_BANNER)||(this.isRequiredConfirm=this.notificationPermission===F.DEFAULT)},methods:{...re(["requestNotificationPermission"]),async onClickClose(){this.isRequiredConfirm?(await L.setItem(P.CONFIRMED_NOTIFICATION_BANNER,pe.ACTIVATED),this.isRequiredConfirm=!1):(await L.setItem(P.HIDE_NOTIFICATION_BANNER,pe.ACTIVATED),this.isShown=!1)}}};var Zn=function(){var e=this,a=e._self._c;return e.isShown?a("div",{staticClass:"notification-browser flex-shrink-0 bg-light w-100 border-top border-secondary",attrs:{role:"alert"}},[a("div",{staticClass:"d-flex justify-content-between align-items-center text-info"},[a("div",{staticClass:"px-3 py-2 flex-shrink-0 flex-grow-1"},[a("small",[a("i",{staticClass:"las la-bell mr-2"}),a("i18n",{attrs:{tag:"span",path:e.xltKey}},[a("button",{directives:[{name:"torimochi-click",rawName:"v-torimochi-click",value:{eventCategory:"crm.footer",eventLabel:"notificationalert_link_text"},expression:"{ eventCategory: 'crm.footer', eventLabel: 'notificationalert_link_text' }"}],staticClass:"btn text-info border-0 p-0 bg-transparent align-baseline shadow-none",attrs:{type:"button",place:"oa.alert.desc.notifpermission2"},on:{click:function(s){return s.preventDefault(),e.requestNotificationPermission.apply(null,arguments)}}},[a("small",[a("u",{directives:[{name:"t",rawName:"v-t",value:"oa.alert.desc.notifpermission2",expression:"'oa.alert.desc.notifpermission2'"}]})])])])],1)]),a("button",{directives:[{name:"torimochi-click",rawName:"v-torimochi-click",value:{eventCategory:"crm.footer",eventLabel:"notificationalert_close_button"},expression:"{ eventCategory: 'crm.footer', eventLabel: 'notificationalert_close_button' }"}],staticClass:"btn text-info border-0 p-0 bg-transparent align-baseline shadow-none px-3 py-2",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),e.onClickClose.apply(null,arguments)}}},[e._m(0)])])]):e._e()},eo=[function(){var t=this,e=t._self._c;return e("small",[e("i",{staticClass:"las la-times"})])}],to=l(Qn,Zn,eo,!1,null,null);const ao=to.exports,so={[D.MAINTENANCE]:{key:"oa.chat.popupdesc.maintenanceerror",warn:!0},[D.NO_PERMISSION]:{key:"oa.chat.desc.accountmissingornochat",warn:!0},[D.MIGRATING]:{key:"oa.chat.desc.inmigration",warn:!1}},no={name:"CommonBotErrorPC",props:{code:{type:String,required:!0}},computed:{errorInfo(){return so[this.code]||{}}}};var oo=function(){var e=this,a=e._self._c;return a("div",{attrs:{id:"wrapper"}},[a("main",{staticClass:"align-items-center justify-content-center",attrs:{id:"content"}},[a("div",{staticClass:"text-center p-5"},[a("div",{staticClass:"h4",class:{"text-danger":e.errorInfo.warn}},[e.errorInfo.warn?a("i",{staticClass:"far fa-exclamation-triangle mr-1"}):e._e(),a("span",{directives:[{name:"t",rawName:"v-t",value:e.errorInfo.key,expression:"errorInfo.key"}]})])])])])},io=[],ro=l(no,oo,io,!1,null,null);const we=ro.exports,co={name:"DisabledChatPC"};var lo=function(){var e=this,a=e._self._c;return a("div",{attrs:{id:"wrapper"}},[a("main",{staticClass:"align-items-center justify-content-center",attrs:{id:"content"}},[a("div",{staticClass:"w-max-600 text-center"},[a("h2",{directives:[{name:"t",rawName:"v-t",value:"oa.chat.title.accountchatsunavailable",expression:"'oa.chat.title.accountchatsunavailable'"}],staticClass:"mb-5"}),a("p",{directives:[{name:"t",rawName:"v-t",value:"oa.chat.desc.accountchatsunavailable",expression:"'oa.chat.desc.accountchatsunavailable'"}]})])])])},uo=[],po=l(co,lo,uo,!1,null,null);const et=po.exports,ho="https://vos.line-scdn.net/line-oa-crm-pc/assets/botmode-pc.DV4Tvucp.png",mo={name:"NotChatModeBotPC",props:{botModel:{type:ne,default:void 0}},computed:{responseSettingsUrl(){return this.botModel?new URL("/account/".concat(this.botModel.basicSearchId,"/setting/response"),y.URL.CMS).toString():"#"}}};var _o=function(){var e=this,a=e._self._c;return a("div",{attrs:{id:"wrapper"}},[a("main",{staticClass:"align-items-center justify-content-center",attrs:{id:"content"}},[a("div",{staticClass:"w-max-800 p-4"},[a("div",{staticClass:"d-flex m-3"},[e._m(0),a("div",{staticClass:"w-60 py-4"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"oa.chat.title.chatsunavailable",expression:"'oa.chat.title.chatsunavailable'"}],staticClass:"h3 mb-4 font-weight-bold"}),a("p",{directives:[{name:"t",rawName:"v-t",value:"oa.chat.desc.chatsunavailable",expression:"'oa.chat.desc.chatsunavailable'"}]}),a("div",{staticClass:"py-1 pb-3"},[a("a",{directives:[{name:"t",rawName:"v-t",value:"oa.chat.button.responsemodesettings",expression:"'oa.chat.button.responsemodesettings'"}],staticClass:"btn btn-primary",class:{disabled:!e.botModel},attrs:{href:e.responseSettingsUrl}})])])])])])])},fo=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"pr-4"},[e("img",{staticClass:"img-fluid",attrs:{alt:"",src:ho,width:"310",height:"208"}})])}],go=l(mo,_o,fo,!1,null,null);const tt=go.exports,vo={[D.NOT_CHAT_MODE]:tt,[D.CHAT_DISABLED]:et},Io={name:"BotErrorPC",components:{NotChatModeBotPC:tt,DisabledChatPC:et,CommonBotErrorPC:we},props:{code:{type:String,required:!0},botModel:{type:ne,default:void 0}},computed:{errorPageComponent(){return vo[this.code]||we}}};var Co=function(){var e=this,a=e._self._c;return a(e.errorPageComponent,{tag:"component",attrs:{code:e.code,"bot-model":e.botModel}})},bo=[],Eo=l(Io,Co,bo,!1,null,null);const Ro=Eo.exports,Z={[M.C_MODAL]:!1,[M.NOTICE_MODAL]:!1,[M.MODAL]:!1,[M.ERROR]:!1},So={name:"BotContainerPC",components:{WtpManagerPC:An,CallReceivedModalPC:Sn,BotErrorPC:Ro,ErrorModalPC:Fn,NotificationBanner:ao,RouteConfirmDialog:In,KeyboardShortcutModalPC:Jn},extends:vn,props:{hasUserInitFinished:{type:Boolean,required:!0}},data(){return{toaster:null,isIdle:!0,micPermission:null}},computed:{...p(["selectedBot","isCallRinging","selectedBotId"]),...v({commonErrorCode:t=>t.env.errorCode,botErrorCode:t=>t.bot.errorCode,clientType:t=>t.env.clientType,sseConnectionId:t=>t.env.network.sseConnectionId,toastList:t=>t.ui.toastList})},created(){this.MODAL_NAME=M,this.$watch(t=>[t.toastList,t.isAppLoading],this.showGlobalToast,{immediate:!0})},mounted(){window.addEventListener("message",this.onReceiveMessage);const t=this.$watch(a=>[a.selectedBotId,a.sseConnectionId,a.isIdle],(a=[],s=[])=>{const n=a.join(",")!==s.join(","),[i,o,g]=a;n&&i&&o&&te.updateConnectionState(i,o,g).catch(x)},{immediate:!0}),e=na(a=>{this.isIdle=a},1e3);this.unwatch=()=>{t(),e()}},beforeDestroy(){window.removeEventListener("message",this.onReceiveMessage),this.unwatch()},methods:{...R({hideCommonError:oa,popGlobalToast:ia}),onDismissError(){this.hideCommonError()},onReceiveMessage({origin:t,data:e}){if(location.origin!==t)return;const{type:a}=e;a===ra.CONNECTED&&te.startCallSession(e.responderId,e.callerId,{clientType:this.clientType}).catch(x)},onChangeModal(t,e){Z[t]=e,Object.keys(Z).some(s=>Z[s])?ca():la()},showGlobalToast(){if(!this.toastList.length||this.isAppLoading)return;const t=this.toastList[0];this.$toast(this.$t(t.message),t.options),this.popGlobalToast()}}};var No=function(){var e=this,a=e._self._c;return a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isAppLoading,expression:"!isAppLoading"}],attrs:{id:"page"},on:{dragover:function(s){s.preventDefault()},drop:function(s){s.preventDefault()}}},[a("HeaderLayout",{directives:[{name:"key-event",rawName:"v-key-event.global",value:e.keyEvents,expression:"keyEvents",modifiers:{global:!0}}]}),a("div",{attrs:{id:"container"}},[e.botErrorCode?a("BotErrorPC",{attrs:{code:e.botErrorCode,"bot-model":e.selectedBot}}):e.isLanguageLoaded?a("router-view"):e._e(),a("NotificationBanner")],1),e.commonErrorCode?a("ErrorModalPC",{attrs:{code:e.commonErrorCode},on:{dismiss:e.onDismissError}}):e._e(),a("RouteConfirmDialog"),e.isCallRinging?a("CallReceivedModalPC",{attrs:{"mic-permission":e.micPermission}}):e._e(),a("WtpManagerPC",{on:{updatePermission:function(s){e.micPermission=s}}}),a("portal-target",{attrs:{slim:"",name:"cmodal"},on:{change:function(s){return e.onChangeModal(e.MODAL_NAME.C_MODAL,s)}}}),a("portal-target",{attrs:{name:"notice-modal"},on:{change:function(s){return e.onChangeModal(e.MODAL_NAME.NOTICE_MODAL,s)}}}),a("portal-target",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"modal",attrs:{slim:"",name:"modal",tabindex:"-1"},on:{change:function(s){return e.onChangeModal(e.MODAL_NAME.MODAL,s)}}}),a("portal-target",{attrs:{name:"error",slim:""},on:{change:function(s){return e.onChangeModal(e.MODAL_NAME.ERROR,s)}}}),a("portal-target",{attrs:{multiple:"",name:"dropdownmenu"}}),e.showShortcutModal?a("portal",{attrs:{to:"modal"}},[a("div",{staticClass:"d-block bg-dark-50 overflow-y-auto"},[a("KeyboardShortcutModalPC",{on:{close:e.onCloseModal}})],1)]):e._e()],1)},yo=[],To=l(So,No,yo,!1,null,null);const wo=To.exports,Oo={name:"Maintenance",data(){return{inProgress:!1,isDisabled:!1,errorMessage:""}},computed:{...p(["isI18nReady"])},watch:{isI18nReady:{immediate:!0,handler(t){if(t){const e=document.getElementById("appLoading");if(!e)return;e.style.display="none"}}}},methods:{...R({setMaintenanceMode:da,updateAppLoading:He}),async checkMaintenanceMode(){this.errorMessage="",this.inProgress=!0,this.isDisabled=!0;let t=!0;try{t=await oe.getMaintenanceMode(),this.setMaintenanceMode(t)}finally{this.errorMessage=t?this.$t("oa.chat.popupdesc.maintenanceerrorstatus"):"",this.inProgress=!1,await ua(1500),this.isDisabled=!1,this.errorMessage=""}}}},Ao=null,Lo=null;var Po=l(Oo,Ao,Lo,!1,null,null);const Mo=Po.exports,Do={name:"MaintenancePC",components:{HeaderLogo:Ze},extends:Mo,methods:{onClickRetry(t){this.checkMaintenanceMode(),t.preventDefault()}}};var $o=function(){var e=this,a=e._self._c;return e.isI18nReady?a("div",[a("header",{attrs:{id:"header"}},[a("div",{attrs:{id:"header-upper"}},[a("HeaderLogo")],1)]),a("div",{attrs:{id:"container"}},[a("div",{attrs:{id:"wrapper"}},[a("main",{staticClass:"align-items-center justify-content-center",attrs:{id:"content"}},[a("div",{staticClass:"text-center p-5"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"oa.chat.popupdesc.maintenancemode",expression:"'oa.chat.popupdesc.maintenancemode'"}],staticClass:"h4 preline"}),a("p",{staticClass:"mt-5"},[a("button",{staticClass:"btn btn-outline-primary w-min-120 h-min-40 mt-4",attrs:{disabled:e.isDisabled},on:{click:e.onClickRetry}},[e.inProgress?a("div",{staticClass:"loader loader-xs loader-primary"}):a("span",{directives:[{name:"t",rawName:"v-t",value:"oa.chat.button.checknow",expression:"'oa.chat.button.checknow'"}]})])]),e.errorMessage?a("p",{staticClass:"text-danger mt-4 preline"},[e._v(" "+e._s(e.errorMessage)+" ")]):e._e()])])])])]):e._e()},ko=[],xo=l(Do,$o,ko,!1,null,null);const Uo=xo.exports,Bo="https://vos.line-scdn.net/line-oa-crm-pc/assets/Bell.BcBmVVdr.wav",at=document.createElement("audio");at.src=Bo;const Ho={play(){at.play().catch(q)}};let K=null,h=null,Oe=null;const Fo=async t=>{var a;const e={tag:(a=t.tag)!=null?a:k.NOTIFICATION_ID,body:t.body,icon:t.icon&&await ha(t.icon)?t.icon:ma,requireInteraction:!!t.requireInteraction};K&&(clearTimeout(K),h==null||h.close()),h=new Notification(t.title,e),h.addEventListener("show",()=>{K=setTimeout(()=>{h==null||h.close()},k.NOTIFICATION_MAINTAIN_TIME)}),h.addEventListener("close",zo),h.addEventListener("click",()=>{window.focus(),h==null||h.close(),t.callback&&t.callback()})},zo=()=>{K=null},Go=t=>{var I;const{settings:e,body:a,sound:s}=t,n={...d.state.settings,...e},{notifyBySound:i,notifyByPopup:o,fromCurrentChat:g,notifyWithPreview:u}=n;$.hasFocus||pa.startBlinkTitle(),i&&(Oe=s!=null?s:Ho,Oe.play()),!(!o||g&&$.hasFocus)&&((I=window.Notification)==null?void 0:I.permission)===F.GRANTED&&Fo({...t,body:u?a:se.t("oa.common.desc.newmessage")})},Ko=q,Wo=Object.freeze(Object.defineProperty({__proto__:null,notify:Go,notifyCurrentRoom:Ko},Symbol.toStringTag,{value:"Module"})),jo={name:"UserContainerPC",components:{MaintenancePC:Uo,BotContainerPC:wo},extends:Es,created(){je.setNotifier(Wo)},methods:{...re(["setUsePcCall"]),async afterCryptoStorageLoaded(){const t=await L.getItem(P.USE_PC_CALL)||"true";this.setUsePcCall(t==="true")}}};var Vo=function(){var e=this,a=e._self._c;return a("div",{attrs:{id:"main-wrapper"}},[e.isMaintenanceMode?a("MaintenancePC"):e.selectedBotId&&e.isContainerReady?a("BotContainerPC",{key:e.selectedBotId,attrs:{"has-user-init-finished":e.hasUserInitFinished}}):e._e()],1)},qo=[],Yo=l(jo,Vo,qo,!1,null,null);const Xo=Yo.exports,Jo={isCallRinging:t=>t.callState===_.RINGING},Ae=t=>{t.callState=_.READY,t.callInfo={gatewayUri:void 0,callerId:void 0,callType:void 0,inviteHeaders:void 0}},Qo={[xe]:Ae,[_a]:(t,{gatewayUri:e,callerId:a,callType:s,inviteHeaders:n})=>{t.callState=_.INCOMING,t.callInfo.gatewayUri=e,t.callInfo.callerId=a,t.callInfo.callType=s,t.callInfo.inviteHeaders=n},[Ge]:t=>{t.callState=_.RINGING},[ze]:t=>{t.callState=_.ANSWERING},[Fe]:t=>{t.callState=_.REJECTING},[Ke]:Ae,[We]:(t,e)=>{t.callCode=e}},Zo={callState:_.READY,callInfo:{gatewayUri:void 0,callerId:void 0,inviteHeaders:void 0,callType:void 0},callCode:void 0},ei={state:Zo,mutations:Qo,getters:Jo},ti={computed:{...p(["selectedBotId","selectedChatId","selectedSavedReplyId","selectedDayOfWeek"])},setup(){const t=Ue(),{selectedTagId:e}=wa(t);return{selectedTagId:e}},methods:{getRoutePath(t,e={},a={}){return{name:t,params:{botId:this.selectedBotId,chatId:this.selectedChatId,tagId:this.selectedTagId,savedReplyId:this.selectedSavedReplyId,dayOfWeek:this.selectedDayOfWeek,...e},query:a}},routerPush(...t){var e;return(e=this.$router.push(...t))==null?void 0:e.catch(he)},routerReplace(...t){var e;return(e=this.$router.replace(...t))==null?void 0:e.catch(he)}}};c.use(Ca,{trigger:"hover"});Da(d,Ve);/Firefox\/([0-9.]+)(?:\s|$)/.test(navigator.userAgent)&&document.addEventListener("dragstart",t=>{t.target.tagName==="A"&&t.preventDefault()});d.registerModule("call",ei);c.mixin(ti);new c({el:"#app",i18n:se,store:d,pinia:Je,router:Ve,render:t=>t(Xo)});
